public class TakeAwayApp {
    private KeyboardReader reader;
    private TakeAwayGame game;

    public TakeAwayApp() {
        reader = new KeyboardReader();
        game = new TakeAwayGame(21);
    }
    
    public void run() {
	int sticksLeft = game.sticksLeft();
        reader.display("Let's play the TakeAway game\n");
        reader.display("There are " + sticksLeft + " sticks left.\n");
        reader.display("You go first.\n");
        while (sticksLeft > 0) {      
	    int userTakes = userMove();
            game.takeAway(userTakes);
            sticksLeft = game.sticksLeft();
            reader.display("There are " + sticksLeft + " sticks left.\n");
            if (sticksLeft <= 0) {
                reader.display("Game over. I win. Nice game.\n");
	    } else {
                int computerTakes = 1 + (int)(Math.random() * 3);
                game.takeAway(computerTakes);
                sticksLeft = game.sticksLeft();
                reader.display("I take " + computerTakes + ". ");
                reader.display("There are " + sticksLeft + " sticks left.\n");
                if (sticksLeft <= 0) {
                    reader.display("Game over. You win. Nice game.\n");
                }
	    }
	}
    }

    private int userMove() {
        reader.prompt("How many sticks do you take, up to 3 : ");
        int userTakes = reader.getKeyboardInteger();
    }

    public static void main(String args[]) {
        TakeAwayApp app = new TakeAwayApp();
        app.run();
    }
}
